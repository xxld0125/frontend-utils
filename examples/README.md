# Frontend Utils 功能验证平台

这是一个专门用于验证前端工具库功能的可视化平台，提供全面的动态加载、沙箱隔离和 CDN 核心功能测试。

## 🎯 项目目标

验证前端工具库的核心功能：
- ✅ `@frontendUtils/load-script` 基础功能
- ✅ `@frontendUtils/cdn-core` 高级功能
- ✅ `@frontendUtils/cdn-vue2` Vue2组件功能
- ✅ 动态加载 UMD 脚本
- ✅ 沙箱隔离机制
- ✅ 缓存优化效果
- ✅ 性能表现监控

## 🚀 快速开始

### 安装依赖
```bash
# 在项目根目录安装所有依赖
pnpm install

# 或者仅在 examples 目录安装
cd examples
pnpm install
```

### 启动开发服务器
```bash
# 在 examples 目录下运行
pnpm dev
```

访问 http://localhost:3000 查看验证平台。

## 📋 功能模块

### 1. 首页 - 功能概览
- 项目介绍和核心特性展示
- 快速导航到各个测试模块
- 使用指南和代码示例

### 2. Load Script 动态加载测试
**测试内容：**
- 预设脚本加载（Lodash、Day.js、Chart.js、Vue 3）
- 自定义脚本 URL 测试
- 加载结果验证和功能测试
- 全局环境变化监控
- 加载历史记录

**重要测试点：**
- UMD 脚本正确加载
- 导出对象可用性验证
- 函数调用正确性检查

### 3. 沙箱隔离测试
**测试内容：**
- 全局变量污染检测
- 变量冲突处理验证
- 沙箱 API 可用性测试
- Console、DOM、Timer 等 API 访问测试

**重要测试点：**
- 全局环境隔离效果
- 变量命名冲突避免
- API 访问权限控制

### 4. 性能测试
**测试内容：**
- 加载时间对比测试
- 并发加载性能验证
- 内存使用情况监控
- 缓存机制效果验证
- 性能统计分析

**重要测试点：**
- 首次 vs 缓存加载时间
- 并发处理能力
- 内存占用控制

### 5. CDN Core 核心功能测试
**测试内容：**
- CDN 配置管理验证
- URL 路径处理测试
- 基于配置的脚本加载
- 网络请求功能（GET/POST）
- 远程字符串获取
- 重试机制验证
- 错误处理测试
- 调试模式和性能测试

**重要测试点：**
- 配置项正确应用
- 相对路径到完整 URL 转换
- 智能重试机制效果
- 网络请求稳定性
- 错误处理完整性

### 6. CDN Vue2 组件测试
**测试内容：**
- Vue 2 组件动态加载验证
- 组件配置管理测试
- 属性传递和事件绑定测试
- 预设组件库加载（Vue 2.7、Element UI、Vuetify）
- 组件生命周期监控
- 错误处理和回退机制测试
- 自定义加载状态配置

**重要测试点：**
- 远程组件正确加载和渲染
- 属性和事件正确传递
- 加载状态和错误处理
- 组件生命周期完整性
- 配置管理有效性

## 🔧 技术栈

- **Vue 3** - 渐进式 JavaScript 框架
- **Vite** - 快速构建工具
- **Vue Router** - 官方路由管理器
- **@frontendUtils/load-script** - 基础脚本加载库
- **@frontendUtils/cdn-core** - CDN 核心功能库
- **@frontendUtils/cdn-vue2** - Vue 2 动态组件库

## 📊 测试指标

### 动态加载性能指标
- ✅ 加载时间 < 1000ms（中等网络环境）
- ✅ 缓存命中率 > 80%
- ✅ 并发加载成功率 > 95%

### 沙箱隔离安全指标
- ✅ 全局变量零污染
- ✅ 变量冲突完全避免
- ✅ API 访问受控制

### 内存使用指标
- ✅ 单次加载内存增加 < 5MB
- ✅ 多次加载无内存泄露
- ✅ 垃圾回收正常工作

## 🧪 测试流程建议

### 基础功能验证
1. 访问首页了解项目概况
2. 进入 "Load Script 测试" 页面
3. 点击预设脚本进行加载测试
4. 验证函数功能是否正常工作
5. 检查加载历史记录

### 沙箱隔离验证
1. 进入 "沙箱隔离测试" 页面
2. 记录加载前全局变量状态
3. 加载测试脚本
4. 检查全局变量变化情况
5. 测试变量冲突处理机制

### 性能表现验证
1. 进入 "性能测试" 页面
2. 执行加载时间测试
3. 进行并发加载测试
4. 监控内存使用情况
5. 分析缓存效果

### CDN Core 功能验证
1. 进入 "CDN Core 测试" 页面
2. 测试配置管理功能
3. 验证 URL 路径处理
4. 测试网络请求功能
5. 验证重试机制和错误处理
6. 开启调试模式查看详细日志

### CDN Vue2 组件验证
1. 进入 "CDN Vue2 测试" 页面
2. 配置 CDN 基础设置和回退内容
3. 测试基础组件加载功能
4. 验证预设组件库加载效果
5. 测试组件属性和事件传递
6. 验证错误处理机制
7. 监控组件生命周期事件

## 🔍 常见问题

### Q: 为什么有些脚本加载失败？
A: 可能的原因：
- 网络连接问题
- CDN 服务不稳定
- 脚本 URL 无效
- CORS 策略限制

### Q: 沙箱隔离测试显示全局变量有变化？
A: 这可能表明：
- 沙箱机制存在漏洞
- 测试脚本确实修改了全局环境
- 需要检查 load-script 的隔离实现

### Q: 性能测试结果不理想？
A: 考虑因素：
- 网络环境影响
- 浏览器缓存策略
- 设备性能差异
- 并发处理限制

## 📈 扩展功能

这个验证平台设计为可扩展的，后续可以添加：

### 新的测试模块
- 错误处理测试
- 兼容性测试
- 安全性测试
- 压力测试

### 新的验证库
- ✅ `@frontendUtils/cdn-vue2` - Vue 2 动态组件库
- `@frontendUtils/ext-vue` - Vue 扩展库
- 其他 packages 中的工具库

### 高级功能
- 自动化测试套件
- 测试报告生成
- 性能基准对比
- CI/CD 集成

## 🤝 贡献指南

1. Fork 项目仓库
2. 创建功能分支
3. 添加测试用例
4. 提交代码变更
5. 创建 Pull Request

## 📝 更新日志

### v1.0.0
- ✅ 基础项目结构
- ✅ 动态加载测试功能
- ✅ 沙箱隔离验证
- ✅ 性能监控模块
- ✅ 响应式 UI 设计

### v1.1.0
- ✅ CDN Core 功能测试页面
- ✅ 配置管理验证
- ✅ 网络请求测试
- ✅ 重试机制验证
- ✅ 错误处理测试

### v1.2.0
- ✅ CDN Vue2 组件测试页面
- ✅ Vue 2 动态组件加载验证
- ✅ 组件属性和事件测试
- ✅ 预设组件库支持
- ✅ 生命周期监控功能
- ✅ 自定义配置管理

---

通过这个验证平台，您可以全面测试和验证前端工具库的各项功能，包括 `@frontendUtils/load-script` 的基础功能和 `@frontendUtils/cdn-core` 的高级功能，确保其在实际应用中的可靠性和性能表现。
